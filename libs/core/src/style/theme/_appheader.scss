@use 'sass:map' as map;
@use '@angular/material' as mat;
@import 'theme';
@import 'typography';

@mixin sto-appheader-theme($theme, $variables) {
  $primary: map.get($variables, primary);
  $accent: mat.m2-get-color-from-palette(map.get($theme, accent), resting);
  $hover-accent: mat.m2-get-color-from-palette(map.get($theme, accent), hover);
  $color: map.get($variables, color);
  $border-color: map.get($variables, border-color);
  $background-color: map.get($variables, card-bg);
  $hover-bg-color: map.get($variables, hover-bg);
  $selected-color: map.get($variables, selected-bg);
  $indicators: map.get($theme, indicators);
  $warning-palette: map.get($indicators, warning);
  $warning-color: mat.m2-get-color-from-palette($warning-palette, resting);
  $icon-color: map.get($variables, icon);
  $hover-color: map.get($variables, hover-color);

  .sto-header {
    background-color: $background-color !important;
    //color: $color !important;
    border-bottom-color: $border-color;

    &--test-environment {
      border: 4px solid $warning-color;
    }

    &__environment--label {
      background: $warning-color;
    }

    button {
      color: $primary;

      &:focus {
        background-color: $selected-color;
      }

      &:hover {
        background-color: $hover-bg-color;
      }
    }

    &__actions--small {
      background: $background-color;
    }
  }

  .sto-breadcrumb {
    &__home {
      color: $primary;

      &:hover {
        color: $primary;
      }
    }

    &__list__item {
      color: $primary;

      &:hover {
        color: $primary;
      }
    }

    .separator {
      color: $primary;
    }
  }
}

body {
  @include sto-appheader-theme($sto-theme, $variables);
}

@mixin app-header-typography($config, $height) {
  .app-wrapper {
    margin: $height auto 0;
  }
  .sto-header {
    height: $height;
    font-size: mat.m2-font-size($config, subtitle-1);
    line-height: mat.m2-line-height($config, subtitle-1);

    .mat-icon {
      font-size: mat.m2-font-size($config, headline-2);
      line-height: mat.m2-font-size($config, headline-2);
      width: mat.m2-font-size($config, headline-2);
      height: mat.m2-font-size($config, headline-2);
    }

    &__environment {
      height: $height;
      top: -4px;
    }
  }
  .sto-breadcrumb {
    font-size: mat.m2-font-size($config, subtitle-1);
    line-height: mat.m2-line-height($config, subtitle-1);

    .mat-icon {
      font-size: mat.m2-font-size($config, headline-2);
      line-height: mat.m2-font-size($config, headline-2);
      width: mat.m2-font-size($config, headline-2);
      height: mat.m2-font-size($config, headline-2);
    }
  }
}

.mat-typography:not(.sto-sm-typography):not(.sto-l-typography) {
  @include app-header-typography($sto-typography, 64px);
}

.mat-typography.sto-sm-typography {
  @include app-header-typography($sto-sm-typography, 48px);
}

.mat-typography.sto-l-typography {
  @include app-header-typography($sto-l-typography, 64px);
}
