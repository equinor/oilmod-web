<div class="sto-mdl-table__header"
     [style.overflow-y]="'hidden'"
     [style.overflowX]="'hidden'"
     *ngIf="!responsive || (responsive && !smallScreen)">
  <div class="sto-mdl-table__header__row sto-mdl-table__header__group__row"
       *ngIf="groups && groups.length > 0"
       [style.display]="columnMode === ColumnDisplay.Flex ? 'flex' : 'block'"
       [style.height]="headerHeight + 'px'"
       [style.min-width]="tempWidth || width"
       [style.transform]="scrollLeft"
       [style.overflow]="'hidden'"
       [class.sto-mdl-table__row--scroll-offset]="!!bodyHeight && (rows?.length || 1) * rowHeight > bodyHeight">
    <div class="sto-mdl-table__header__row__cell sto-mdl-table__header__group__row__cell"
         [style.flex-basis.px]="group | getGroupFlex:columns"
         *ngFor="let group of groups; let i = index;">
      <span class="sto-mdl-table__header__row__cell__content">{{ group.name || '' }}</span>
    </div>
  </div>

  <div class="sto-mdl-table__header__row"
       matSort
       (matSortChange)="sortColumn($event)"
       [matSortDisabled]="!sortable"
       (dragover)="$event.preventDefault()"
       [style.display]="columnMode === ColumnDisplay.Flex ? 'flex' : 'block'"
       [style.height]="headerHeight + 'px'"
       [style.min-width]="tempWidth || width"
       [style.transform]="scrollLeft"
       [style.overflow]="'hidden'"
       [class.sto-mdl-table__row--scroll-offset]="!!bodyHeight && (rows?.length || 1) * rowHeight > bodyHeight">
    <div class="sto-mdl-table__header__row__cell"
         [mat-sort-header]="column.$$id"
         [arrowPosition]="column.sortArrowPosition || 'after'"
         [disabled]="column.disableSort"
         (contextmenu)="headerContextMenu.emit({event: $event, column: column})"
         [class.sto-mdl-table__header__row__cell--sortable]="sortable && !column.disableSort"
         [ngClass]="column.headerClass | exec:column"
         [ngStyle]="column | columnStyle:columnMode:(resize.width$ | async)"
         *ngFor="let column of columns; let i = index; trackBy: trackColumnsFn">
      <span *ngIf="!column.headerTemplate"
            class="sto-mdl-table__header__row__cell__content"
            [title]="column.name">{{ column.name || '' }}</span>
      <ng-template #headerTemplate
                   *ngIf="column.headerTemplate"
                   [ngTemplateOutlet]="column.headerTemplate"
                   [ngTemplateOutletContext]="{column: column}">
      </ng-template>
      <span [style.height.px]="headerHeight - 4"
            (click)="$event.stopPropagation();"
            stoDatatableResize
            #resize="stoDatatableResize"
            [column]="column"
            [style.display]="resizeable && !column.disableResize ? 'inherit' : 'none'"
            (resizeEnd)="onResizeEnd(column, $event)"
            (resize)="onResize(column, $event)">
        <span style="width: 1px; height: 100%; margin: auto"></span>
      </span>
    </div>
  </div>
</div>
