<div
  class="sto-header"
  [class.sto-header--test-environment]="testEnvironment()"
>
  <sto-breadcrumbs
    [home]="homeBreadCrumbConfig()"
    [model]="breadCrumbs() ?? []"
  ></sto-breadcrumbs>
  <ng-content select=".sto-header__form"> </ng-content>
  @if (testEnvironment() && environmentName() && !isSmall()) {
    <div class="sto-header__environment">
      <div class="sto-header__environment--label">
        {{ environmentName() }}
      </div>
    </div>
  }
  <span class="spacer"></span>
  @if (isSmall()) {
    <button matIconButton class="small-toggle" (click)="toggleMenu($event)">
      <mat-icon>more_vert</mat-icon>
    </button>
  }
  <div
    class="sto-header__actions"
    [class.sto-header__actions--small--open]="menuOpen()"
    [class.sto-header__actions--small]="isSmall()"
  >
    <ng-content></ng-content>
    <button matIconButton title="Accessibility" [matMenuTriggerFor]="menu">
      <mat-icon>accessibility</mat-icon>
    </button>
    @if (userMenu()) {
      <button matIconButton title="Account" [matMenuTriggerFor]="userMenu()!">
        <mat-icon>account_circle</mat-icon>
      </button>
    }
  </div>
</div>

<mat-menu #menu="matMenu" [yPosition]="isSmall() ? 'above' : 'below'">
  <button mat-menu-item class="dense" (click)="toggleTheme()">
    <mat-icon>{{ darkmode() ? 'wb_sunny' : 'nights_stay' }}</mat-icon>
    {{ darkmode() ? 'Disable' : 'Enable' }} night mode
  </button>
  <button mat-menu-item class="dense" [matMenuTriggerFor]="fontMenu">
    <mat-icon>format_size</mat-icon>
    Font size
  </button>
</mat-menu>
<mat-menu #fontMenu="matMenu">
  <button
    mat-menu-item
    class="dense"
    style="--mat-menu-item-label-text-size: 10px"
    (click)="toggleTypography('sto-sm-typography')"
  >
    Smaller
  </button>
  <button
    mat-menu-item
    class="dense"
    style="--mat-menu-item-label-text-size: 13px"
    (click)="toggleTypography()"
  >
    Regular
  </button>
  <button
    mat-menu-item
    class="dense"
    style="--mat-menu-item-label-text-size: 16px"
    (click)="toggleTypography('sto-l-typography')"
  >
    Larger
  </button>
</mat-menu>
